<!-- pages/index/index.wxml -->
<view class="container">
  <!-- 新增个人信息头部 -->
  <view class="user-header">
    <image class="user-avatar" src="{{userInfo.avatarUrl || '/assets/images/default-avatar.jpg'}}" mode="aspectFill"></image>
    <view class="user-info">
      <text class="user-name">{{userInfo.nickName || '微信用户'}}</text>
      <text class="user-score">未设置分数</text>
    </view>
    <view class="user-rank">
      <text class="rank-label">排名</text>
      <text class="rank-value">未上榜</text>
    </view>
  </view>

  <view class="stats">
    <text class="stats-item">参与人数: {{stats.users}}</text>
    <text class="stats-item">答题次数: {{stats.attempts}}</text>
    <text class="stats-item">总分: {{stats.totalScore}}</text>
  </view>
  <view class="leaderboard-container">
    <scroll-view scroll-y class="leaderboard-scroll">
      <view class="leaderboard">
        <block wx:for="{{leaderboard}}" wx:key="index">
          <view class="user-item {{index === 0 ? 'first' : ''}}">
            <text class="rank">{{index + 1}}</text>
            <image class="avatar" src="{{item.avatar || '/assets/images/default-avatar.jpg'}}" mode="aspectFill"></image>
            <text class="name">{{item.name}}</text>
            <text class="score">{{item.score}} 分</text>
          </view>
        </block>
      </view>
    </scroll-view>
  </view>
  <button class="checkin-button" bindtap="navigateToCheckins">今日打卡</button>
</view>